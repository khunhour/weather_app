(()=>{"use strict";function e(e){let t=60*(new Date).getTimezoneOffset();return("0"+new Date(1e3*(e+t)).getHours()).slice(-2)}function t(){return"Celcius"===document.querySelector('input[name="unit"]:checked').value?"metric":"imperial"}async function n(n){if(n)try{let o=await async function(e){try{let n=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=02cafa796b213d5a197f3a3378f70a47&units=${t()}`,o=await async function(e){try{let t=await fetch(e,{mode:"cors"});return await t.json()}catch(e){console.log("error at fetchCurrentWeatherData"),console.error(e)}}(n);if("404"===o.cod)return;return function(e){let t={};return t.city=e.name,t.temp=Math.round(e.main.temp),t.lowTemp=Math.round(e.main.temp_min),t.highTemp=Math.round(e.main.temp_max),t.feels_like=e.main.feels_like,t.humidity=e.main.humidity,t.windSpeed=e.wind.speed,t.weather=e.weather[0].main,t.description=e.weather[0].description,t.coord=e.coord,t.date=e.dt,t.timezone=e.timezone,t}(o)}catch(e){console.log("error at getWeatherInfo"),console.error(e)}}(n);if(null==o)throw"City Not Found";let a=function(e){let n=t(),o=e.coord.lon;return`https://api.openweathermap.org/data/2.5/onecall?lat=${e.coord.lat}&lon=${o}&exclude=minutely,alerts&appid=02cafa796b213d5a197f3a3378f70a47&units=${n}`}(o);document.getElementById("input").value="";let r=await async function(e){try{let t=await fetch(e,{mode:"cors"}),n=await t.json(),o=n.timezone_offset,a=n.hourly.slice(0,24);return{dailyForecast:{timeZoneOffset:o,dailyData:n.daily},hourlyForecast:{timeZoneOffset:o,hourlyData:a}}}catch(e){console.log("error at fetchHourlyAndDailyWeatherData"),console.error(e)}}(a);(function(n){const o=document.querySelector(".cityName"),a=document.querySelector(".temp"),r=document.querySelector(".description"),c=document.querySelector(".highTemp"),i=document.querySelector(".lowTemp"),d=document.querySelector(".humidity"),l=document.querySelector(".wind");let u,s;"metric"===t()?(u="°C",s="m/s"):(u="°F",s="mph"),function(t){let n=Number(e(t.date+t.timezone));n>5&&n<11?(document.body.className="",document.body.classList.add("clear")):n>11&&n<16?(document.body.className="",document.body.classList.add("sunny")):(document.body.className="",document.body.classList.add("night")),(t.description.includes("rain")||t.description.includes("broken clouds")||t.description.includes("overcast clouds")||t.description.includes("snow"))&&(document.body.className="grey")}(n),o.textContent=n.city,a.textContent=`${n.temp}${u}`,r.textContent=n.description,c.textContent=`High: ${n.highTemp}${u}`,i.textContent=`Low: ${n.lowTemp}${u}`,d.textContent=`Humidity: ${n.humidity}%`,l.textContent=`Wind Speed: ${n.windSpeed}${s}`})(o),function(t){let n=t.hourlyData,o=t.timeZoneOffset;for(let t=0;t<24;t++){const a=document.querySelector(`[data-hourly='${t}']`).children;let r,c=a[0],i=a[1],d=a[2];r=0===t?"Now":e(n[t].dt+o);let l=n[t].weather[0].icon,u=Math.round(n[t].temp);c.textContent=r,i.src=`./images/${l}.png`,d.textContent=`${u}°`}}(r.hourlyForecast),function(e){let t=e.dailyData,n=e.timeZoneOffset;for(let e=0;e<7;e++){const a=document.querySelector(`[data-daily='${e}']`).children;let r,c=a[0],i=a[1],d=a[2],l=a[3];r=0===e?"Today":(o=t[e].dt+n,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*o).getDay()]);let u=t[e].weather[0].icon,s=Math.round(t[e].temp.max),m=Math.round(t[e].temp.min);c.textContent=r,i.src=`./images/${u}.png`,d.textContent=`L: ${m}°`,l.textContent=`H: ${s}°`}var o}(r.dailyForecast)}catch(e){alert("Please Enter a Valid City Name!"),console.error(e)}}n("Tokyo"),document.querySelector("#form").addEventListener("submit",(e=>{n(document.getElementById("input").value),e.preventDefault()})),document.querySelectorAll('input[type="radio"]').forEach((e=>{e.addEventListener("change",(()=>{n(document.querySelector(".cityName").textContent)}))}))})();